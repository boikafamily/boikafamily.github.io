<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–í–∏—à–ª–∏—Å—Ç –ù–∞—Å—Ç–∏ –Ω–∞ 8-–ª–µ—Ç–∏–µ</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',system-ui,sans-serif}
body{background:linear-gradient(135deg,#ffe6f0,#fff0f9);color:#333;padding:12px;max-width:1200px;margin:auto}
.container{background:#fff;border-radius:20px;box-shadow:0 10px 25px rgba(233,30,99,.15);padding:25px}
h1{color:#e91e63;margin-bottom:15px}
h2{color:#d81b60;margin:25px 0 15px}
.intro-text{background:#fff0f5;padding:15px;border-radius:12px;margin-bottom:15px}
.rules{background:#fff5f9;padding:20px;border-radius:15px;margin:20px 0}
.rules ol{margin-left:20px}
.gifts-table{width:100%;border-collapse:collapse;border-radius:15px;overflow:hidden}
.gifts-table th{background:#f8bbd0;padding:10px;text-align:left}
.gifts-table td{padding:10px;border-bottom:1px solid #f5f5f5}
.gifts-table tr.booked-row{opacity:.6}
.gifts-table tr.booked-row strong{text-decoration:line-through}
.category{background:#fce4ec;padding:4px 10px;border-radius:12px;font-size:.85rem}
.status{padding:5px 10px;border-radius:12px;font-weight:bold;font-size:.85rem}
.status-free{background:#e8f5e9;color:#2e7d32}
.status-booked{background:#f8bbd0;color:#880e4f}
.btn{padding:7px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:600}
.btn-preview{background:#e3f2fd;color:#0d47a1}
.btn-reserve{background:#f8bbd0;color:#880e4f}
.btn-unbook{background:#ffecb3;color:#e65100}
.gifts-cards{display:none;gap:15px}
.gift-card{background:#fff;border-radius:15px;padding:15px;box-shadow:0 5px 12px rgba(0,0,0,.1)}
.gift-card.booked{opacity:.6}
@media(max-width:768px){
.gifts-table-wrapper{display:none}
.gifts-cards{display:flex;flex-direction:column}
}
</style>
</head>

<body>

<div class="container">
<h1><i class="fas fa-birthday-cake"></i> –í–∏—à–ª–∏—Å—Ç –ù–∞—Å—Ç–∏ –Ω–∞ 8-–ª–µ—Ç–∏–µ</h1>

<div class="intro-text">
–ü—Ä–∏–≤–µ—Ç! –ú–Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è 8 –ª–µ—Ç, –∏ —è –±—É–¥—É —Ä–∞–¥–∞, –µ—Å–ª–∏ —Ç—ã –∑–∞–≥–ª—è–Ω–µ—à—å –≤ –º–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ üíñ
</div>

<section class="rules">
<h2>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
<ol>
<li>–ù–∞–∂–º–∏ ¬´–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å¬ª</li>
<li>–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–¥–∞—Ä–∏—Ç—å ‚Äî ¬´–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å¬ª</li>
<li>–ü–æ–¥–∞—Ä–æ–∫ —Å—Ç–∞–Ω–µ—Ç —Å–µ—Ä—ã–º –¥–ª—è –≤—Å–µ—Ö</li>
</ol>
</section>

<h2>–°–ø–∏—Å–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤</h2>

<div class="gifts-table-wrapper">
<table class="gifts-table">
<thead>
<tr>
<th>‚Ññ</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th><th>–î–µ–π—Å—Ç–≤–∏—è</th><th>–°—Ç–∞—Ç—É—Å</th>
</tr>
</thead>
<tbody id="gifts-table-body"></tbody>
</table>
</div>

<div class="gifts-cards" id="gifts-cards-container"></div>
</div>

<script>
const supabaseClient = supabase.createClient(
  'https://yjithstkzcvcycmrfqet.supabase.co',
  'sb_publishable_-3Ipd2kAASwMYidT-kEoeg_6X07zYkl'
);

const gifts=[
{id:1,name:"–ü–∏–∂–∞–º–∞ —Å–æ —à—Ç–∞–Ω–∞–º–∏",cat:"–û–¥–µ–∂–¥–∞",link:"https://www.wildberries.by/catalog/446793216/detail.aspx"},
{id:2,name:"–ö–∏–≥—É—Ä—É–º–∏ –ü–∏–∫–∞—á—É",cat:"–û–¥–µ–∂–¥–∞",link:"https://www.wildberries.by/catalog/177554973/detail.aspx"},
{id:3,name:"–¢–∞–ø–æ—á–∫–∏ –ü–∏–∫–∞—á—É",cat:"–û–¥–µ–∂–¥–∞",link:"https://www.wildberries.by/catalog/134246810/detail.aspx"},
{id:4,name:"–°–ª–æ–≤–æ–¥–µ–ª –í–µ–ª–∏–∫–∞–Ω",cat:"–ò–≥—Ä—ã",link:"https://www.wildberries.by/catalog/374826/detail.aspx"},
{id:5,name:"–í–ª–∞—Å—Ç–µ–ª–∏–Ω —Å–ª–æ–≤",cat:"–ò–≥—Ä—ã",link:"https://www.wildberries.by/catalog/288097336/detail.aspx"},
{id:6,name:"–ó–µ–ª—å–µ",cat:"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ",link:"https://www.wildberries.by/catalog/436264576/detail.aspx"},
{id:7,name:"–ú–∏–Ω–∏ –ø—Ä–∏–Ω—Ç–µ—Ä",cat:"–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",link:"https://www.wildberries.by/catalog/202653223/detail.aspx"},
{id:8,name:"–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä—É—á–µ–∫",cat:"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ",link:"https://www.wildberries.by/catalog/486210468/detail.aspx"},
{id:9,name:"–ö–Ω–∏–≥–∞ –∞–Ω–∫–µ—Ç–∞",cat:"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ",link:"https://www.wildberries.by/catalog/15473870/detail.aspx"},
{id:10,name:"–ß—Ç–æ –∑–∞ —Ç—Ä–µ–∫",cat:"–ò–≥—Ä—ã",link:"https://www.wildberries.by/catalog/344230530/detail.aspx"},
{id:11,name:"–°–æ–∑–¥–∞–π —á–∞—Å—ã",cat:"–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",link:"https://www.wildberries.by/catalog/234551397/detail.aspx"}
];

let states={};

async function load(){
const {data}=await supabaseClient.from('gifts').select('*');
data.forEach(r=>states[r.id]=r.status);
render();
}

async function setStatus(id,status){
await supabaseClient.from('gifts').update({status}).eq('id',id);
load();
}

function render(){
const tb=document.getElementById('gifts-table-body');
const cards=document.getElementById('gifts-cards-container');
tb.innerHTML='';cards.innerHTML='';

gifts.forEach(g=>{
const st=states[g.id]||'free';
const tr=document.createElement('tr');
if(st==='booked')tr.classList.add('booked-row');
tr.innerHTML=`
<td>${g.id}</td>
<td><strong>${g.name}</strong></td>
<td><span class="category">${g.cat}</span></td>
<td>
<button class="btn btn-preview" onclick="window.open('${g.link}')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</button>
${st==='free'
?`<button class="btn btn-reserve" onclick="setStatus(${g.id},'booked')">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>`
:`<button class="btn btn-unbook" onclick="setStatus(${g.id},'free')">–û—Ç–º–µ–Ω–∏—Ç—å</button>`}
</td>
<td><span class="status ${st==='free'?'status-free':'status-booked'}">${st==='free'?'–°–≤–æ–±–æ–¥–Ω–æ':'–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ'}</span></td>`;
tb.appendChild(tr);

const card=document.createElement('div');
card.className=`gift-card ${st==='booked'?'booked':''}`;
card.innerHTML=`
<h3>${g.name}</h3>
<div class="category">${g.cat}</div>
<span class="status ${st==='free'?'status-free':'status-booked'}">${st==='free'?'–°–≤–æ–±–æ–¥–Ω–æ':'–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ'}</span>
<button class="btn btn-preview" onclick="window.open('${g.link}')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</button>
${st==='free'
?`<button class="btn btn-reserve" onclick="setStatus(${g.id},'booked')">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>`
:`<button class="btn btn-unbook" onclick="setStatus(${g.id},'free')">–û—Ç–º–µ–Ω–∏—Ç—å</button>`}
`;
cards.appendChild(card);
});
}

document.addEventListener('DOMContentLoaded',load);
</script>

</body>
</html>
