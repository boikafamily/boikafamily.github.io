<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–í–∏—à–ª–∏—Å—Ç –ù–∞—Å—Ç–∏ –Ω–∞ 8-–ª–µ—Ç–∏–µ</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',system-ui,sans-serif}
body{
  background:linear-gradient(135deg,#ffe6f0,#fff0f9);
  max-width:1200px;margin:0 auto;padding:12px;color:#333
}
.container{
  background:#fff;border-radius:20px;padding:25px;
  box-shadow:0 10px 25px rgba(233,30,99,.1)
}
h1{color:#e91e63;margin-bottom:15px}
h2{margin:25px 0 10px;color:#d81b60}

.intro-text{
  background:#fff0f5;padding:15px;border-radius:12px;margin-bottom:12px
}

table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #eee}
th{background:#f8bbd0;color:#880e4f;text-align:left}

.category{
  background:#fce4ec;padding:4px 10px;border-radius:12px;
  color:#880e4f;font-weight:600;font-size:.85rem
}

.status{
  padding:4px 12px;border-radius:12px;font-weight:600;font-size:.85rem
}
.status-free{background:#e8f5e9;color:#2e7d32}
.status-booked{background:#f8bbd0;color:#880e4f}

.btn{
  padding:7px 12px;border-radius:10px;border:none;
  cursor:pointer;font-weight:600;margin-right:6px
}
.btn-preview{background:#e3f2fd;color:#0d47a1}
.btn-reserve{background:#f8bbd0;color:#880e4f}
.btn-unbook{background:#ffecb3;color:#e65100}

/* === –°–ï–†–´–ô –ó–ê–ë–†–û–ù–ò–†–û–í–ê–ù–ù–´–ô === */
.booked-row,
.booked-row *{
  color:#9e9e9e!important
}
.booked-row strong{
  text-decoration:line-through
}
.booked-row .btn{
  background:#eeeeee!important;border:1px solid #ddd!important
}
.booked-row .btn-unbook{
  background:linear-gradient(135deg,#ffecb3,#ffd54f)!important;
  color:#e65100!important;border:none!important
}

#notify{
  position:fixed;top:15px;right:15px;
  padding:10px 18px;border-radius:12px;
  background:#c8e6c9;color:#1b5e20;
  transform:translateX(150%);transition:.4s
}
</style>
</head>

<body>
<div class="container">

<h1>üéÇ –í–∏—à–ª–∏—Å—Ç –ù–∞—Å—Ç–∏ –Ω–∞ 8-–ª–µ—Ç–∏–µ</h1>

<div class="intro-text">
–ü—Ä–∏–≤–µ—Ç! –ú–Ω–µ 8 –ª–µ—Ç, –∏ —è –æ—á–µ–Ω—å —Ä–∞–¥–∞, —á—Ç–æ —Ç—ã –ø—Ä–∏–¥—ë—à—å –Ω–∞ –º–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è üíñ
</div>

<h2>üéÅ –°–ø–∏—Å–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤</h2>

<table>
<thead>
<tr>
<th>‚Ññ</th>
<th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
<th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
<th>–î–µ–π—Å—Ç–≤–∏—è</th>
<th>–°—Ç–∞—Ç—É—Å</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

</div>

<div id="notify"></div>

<script>
/* === SUPABASE === */
const supabase = supabase.createClient(
  'https://yjithstkzcvcycmrfqet.supabase.co',
  'sb_publishable_-3Ipd2kAASwMYidT-kEoeg_6X07zYkl'
);

/* === –ü–û–î–ê–†–ö–ò === */
const gifts = [
 {id:1,name:"–ü–∏–∂–∞–º–∞ —Å–æ —à—Ç–∞–Ω–∞–º–∏",cat:"–û–¥–µ–∂–¥–∞",link:"https://www.wildberries.by/catalog/446793216/detail.aspx"},
 {id:2,name:"–ö–∏–≥—É—Ä—É–º–∏ –ü–∏–∫–∞—á—É",cat:"–û–¥–µ–∂–¥–∞",link:"https://www.wildberries.by/catalog/177554973/detail.aspx"},
 {id:3,name:"–¢–∞–ø–æ—á–∫–∏ –ü–∏–∫–∞—á—É",cat:"–û–¥–µ–∂–¥–∞",link:"https://www.wildberries.by/catalog/134246810/detail.aspx"},
 {id:4,name:"–°–ª–æ–≤–æ–¥–µ–ª –í–µ–ª–∏–∫–∞–Ω",cat:"–ò–≥—Ä—ã",link:"https://www.wildberries.by/catalog/374826/detail.aspx"},
 {id:5,name:"–í–ª–∞—Å—Ç–µ–ª–∏–Ω —Å–ª–æ–≤",cat:"–ò–≥—Ä—ã",link:"https://www.wildberries.by/catalog/288097336/detail.aspx"},
 {id:6,name:"–ó–µ–ª—å–µ (–Ω–∞–±–æ—Ä)",cat:"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ",link:"https://www.wildberries.by/catalog/436264576/detail.aspx"},
 {id:7,name:"–ú–∏–Ω–∏ –ø—Ä–∏–Ω—Ç–µ—Ä",cat:"–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",link:"https://www.wildberries.by/catalog/202653223/detail.aspx"},
 {id:8,name:"–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä—É—á–µ–∫",cat:"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ",link:"https://www.wildberries.by/catalog/486210468/detail.aspx"},
 {id:9,name:"–ö–Ω–∏–≥–∞-–∞–Ω–∫–µ—Ç–∞",cat:"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ",link:"https://www.wildberries.by/catalog/15473870/detail.aspx"},
 {id:10,name:"–ß—Ç–æ –∑–∞ —Ç—Ä–µ–∫",cat:"–ò–≥—Ä—ã",link:"https://www.wildberries.by/catalog/344230530/detail.aspx"},
 {id:11,name:"–°–æ–∑–¥–∞–π —á–∞—Å—ã",cat:"–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",link:"https://www.wildberries.by/catalog/234551397/detail.aspx"}
];

let states = {};

/* === –ó–ê–ì–†–£–ó–ö–ê === */
async function load(){
  const {data}=await supabase.from('gifts').select('*');
  data.forEach(r=>states[r.id]=r.status);
  render();
}

/* === –û–ë–ù–û–í–õ–ï–ù–ò–ï === */
async function setStatus(id,status){
  await supabase.from('gifts').update({status}).eq('id',id);
  notify(status==='booked'?'–ü–æ–¥–∞—Ä–æ–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω!':'–ë—Ä–æ–Ω—å –æ—Ç–º–µ–Ω–µ–Ω–∞');
  load();
}

/* === –†–ï–ù–î–ï–† === */
function render(){
  const tb=document.getElementById('tbody');
  tb.innerHTML='';
  gifts.forEach(g=>{
    const st=states[g.id]||'free';
    const tr=document.createElement('tr');
    if(st==='booked')tr.classList.add('booked-row');
    tr.innerHTML=`
      <td>${g.id}</td>
      <td><strong>${g.name}</strong></td>
      <td><span class="category">${g.cat}</span></td>
      <td>
        <button class="btn btn-preview" onclick="window.open('${g.link}')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</button>
        ${
          st==='free'
          ? `<button class="btn btn-reserve" onclick="setStatus(${g.id},'booked')">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>`
          : `<button class="btn btn-unbook" onclick="setStatus(${g.id},'free')">–û—Ç–º–µ–Ω–∏—Ç—å</button>`
        }
      </td>
      <td>
        <span class="status ${st==='free'?'status-free':'status-booked'}">
          ${st==='free'?'–°–≤–æ–±–æ–¥–Ω–æ':'–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ'}
        </span>
      </td>`;
    tb.appendChild(tr);
  });
}

/* === –£–í–ï–î–û–ú–õ–ï–ù–ò–ï === */
function notify(text){
  const n=document.getElementById('notify');
  n.textContent=text;
  n.style.transform='translateX(0)';
  setTimeout(()=>n.style.transform='translateX(150%)',2500);
}

load();
</script>
</body>
</html>
